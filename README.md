# vps-script

## Скрипт: **start.sh**

Этот скрипт автоматизирует базовую настройку сервера Ubuntu, включая создание пользователя, настройку SSH, установку Docker и базовую безопасность.

---

## Что делает скрипт

1. **Обновление системы**  
   Выполняет команду `apt update && apt upgrade -y` — обновляет список пакетов и устанавливает все доступные обновления безопасности и исправления.

2. **Создание нового пользователя**  
   - Запрашивает имя нового пользователя.  
   - Создаёт пользователя без пароля (`--disabled-password`).  
   - Добавляет его в группу `sudo` для прав администратора.

3. **Принудительная смена пароля при первом входе**  
   Пользователь должен задать пароль при первом входе, что повышает безопасность.

4. **Настройка SSH**  
   - Запрашивает новый порт SSH (например, 2222).  
   - Меняет порт SSH на указанный.  
   - Отключает вход под `root` по SSH.  
   - Включает аутентификацию по паролю (при необходимости можно изменить на ключи).

5. **Перезапуск SSH-сервиса**  
   Применяет настройки, перезапуская SSH.

6. **Установка Docker**  
   - Скачивает и запускает официальный скрипт установки Docker.  
   - Добавляет нового пользователя в группу `docker` для работы с контейнерами без `sudo`.

7. **Установка и запуск Fail2Ban**  
   - Устанавливает Fail2Ban — защиту от перебора паролей и автоматических атак.  
   - Включает и запускает Fail2Ban автоматически.

8. **Настройка UFW (фаервола)**  
   - Запрещает все входящие подключения по умолчанию.  
   - Разрешает все исходящие подключения.  
   - Открывает указанный порт SSH.  
   - Открывает стандартные порты Docker: `2376`, `2377`, `7946`, `4789`.  
   - Включает UFW с этими правилами.

9. **Финальное сообщение**  
   Выводит информацию о созданном пользователе, способе подключения по SSH и проверке Docker.

---

## Как использовать

Скопируйте и выполните эту команду на сервере для скачивания и запуска скрипта:

```bash
curl -fsSL https://raw.githubusercontent.com/Muhendalf-ru/vps-script/main/start.sh -o start.sh && chmod +x start.sh && sudo ./start.sh
